<html data-bs-theme="dark" lang="es"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header::header-css">
    <title th:text="#{app.title}"></title>
</head>
<body class="d-flex flex-column min-vh-100">
<header th:replace="fragments/header::header-content"></header>
<main id="main">
    <section class="p-sm-3" id="user-details">
        <div class="container-lg">
            <h2 class="m-4 text-center" id="title" th:text="#{user.details.title}"></h2>
            <hr>
            <form class="needs-validation" method="post" novalidate th:action="@{/user-details}"
                  th:object="${user}">

                <!-- User details -->
                <div class="row g-3">
                    <div class="col-lg-6">
                        <label class="form-label visually-hidden" for="email" th:text="#{user.email}"></label>
                        <div class="input-group has-validation mb-2">
                            <span class="input-group-text" id="inputGroupEmail" th:text="#{user.email}"></span>
                            <input aria-describedby="inputGroupEmail" autofocus class="form-control" disabled
                                   id="email" name="email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$" required
                                   th:value="*{email}" type="email">
                            <div class="invalid-feedback">
                                <i class="bi-exclamation-circle"></i>
                                <span th:text="#{sign.up.email}"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>
                <div class="row g-3">
                    <div class="col-md-3">
                        <label class="form-label visually-hidden" for="firstName" th:text="#{user.first}"></label>
                        <div class="input-group has-validation mb-2">
                            <span class="input-group-text" id="inputGroupFirstName" th:text="#{user.first}"></span>
                            <input aria-describedby="inputGroupFirstName" class="form-control" id="firstName"
                                   name="firstName" required th:value="*{firstName}" type="text">
                            <div class="invalid-feedback">
                                <i class="bi-exclamation-circle"></i>
                                <span th:text="#{sign.up.name}"></span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label visually-hidden" for="lastName" th:text="#{user.last}"></label>
                        <div class="input-group has-validation mb-2">
                            <span class="input-group-text" id="inputGroupLastName" th:text="#{user.last}"></span>
                            <input aria-describedby="inputGroupLastName" class="form-control" id="lastName"
                                   name="lastName" required th:value="*{lastName}" type="text">
                            <div class="invalid-feedback">
                                <i class="bi-exclamation-circle"></i>
                                <span th:text="#{sign.up.last}"></span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label visually-hidden" for="phone" th:text="#{user.phone}"></label>
                        <div class="input-group has-validation mb-2">
                            <span class="input-group-text" id="inputGroupPhone" th:text="#{user.phone}"></span>
                            <input aria-describedby="inputGroupPhone" class="form-control" id="phone" name="phone"
                                   pattern=".{9,}" required th:value="*{phone}" type="text">
                            <div class="invalid-feedback">
                                <i class="bi-exclamation-circle"></i>
                                <span th:text="#{sign.up.phone}"></span>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-3">
                        <label class="form-label visually-hidden" for="address" th:text="#{user.address}"></label>
                        <div class="input-group has-validation mb-2">
                            <span class="input-group-text" id="inputGroupAddress" th:text="#{user.address}"></span>
                            <input aria-describedby="inputGroupAddress" class="form-control" id="address"
                                   name="address" required th:value="*{address}" type="text">
                            <div class="invalid-feedback">
                                <i class="bi-exclamation-circle"></i>
                                <span th:text="#{sign.up.address}"></span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label visually-hidden" for="postalCode" th:text="#{user.postal.code}"/>
                        <div class="input-group has-validation mb-2">
                            <span class="input-group-text" id="inputGroupPostal" th:text="#{user.postal.code}"/>
                            <input aria-describedby="inputGroupPostal" class="form-control" id="postalCode"
                                   name="postalCode" pattern="^\s*?\d{5}(?:[-\s]\d{4})?\s*?$" required
                                   th:value="*{postalCode}" type="text">
                            <div class="invalid-feedback">
                                <i class="bi-exclamation-circle"></i>
                                <span th:text="#{sign.up.postal.code}"></span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label visually-hidden" for="city" th:text="#{user.city}"></label>
                        <div class="input-group has-validation mb-2">
                            <span class="input-group-text" id="inputGroupCity" th:text="#{user.city}"></span>
                            <input aria-describedby="inputGroupCity" class="form-control" id="city" name="city"
                                   required th:value="*{city}" type="text">
                            <div class="invalid-feedback">
                                <i class="bi-exclamation-circle"></i>
                                <span th:text="#{sign.up.city}"></span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label visually-hidden" for="province" th:text="#{user.province}"></label>
                        <div class="input-group has-validation mb-2">
                                <span class="input-group-text" id="inputGroupProvince"
                                      th:text="#{user.province}"></span>
                            <input aria-describedby="inputGroupProvince" class="form-control" id="province"
                                   name="province" required th:value="*{province}" type="text">
                            <div class="invalid-feedback">
                                <i class="bi-exclamation-circle"></i>
                                <span th:text="#{sign.up.province}"></span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label visually-hidden" for="country" th:text="#{user.country}"></label>
                        <div class="input-group has-validation mb-2">
                            <span class="input-group-text" id="inputGroupCountry" th:text="#{user.country}"></span>
                            <input aria-describedby="inputGroupCountry" class="form-control" id="country"
                                   name="country" required th:value="*{country}" type="text">
                            <div class="invalid-feedback">
                                <i class="bi-exclamation-circle"></i>
                                <span th:text="#{sign.up.country}"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Preferences -->
                <hr>
                <div class="row g-3">
                    <div class="card-group">
                        <div class="card border-2 border-dark-subtle">
                            <div class="card-header text-center">
                                <span th:text="#{sign.up.preferences.genres}"></span></div>
                            <div class="card-body bg-light-subtle p-0 overflow-y-scroll"
                                 style="--height: 400px; min-height: var(--height); max-height: var(--height);">
                                <div class="list-group rounded-0" th:each="genre : ${genres}">
                                    <label class="list-group-item border-top-0 border-start-0 border-end-0">
                                        <input class="form-check-input me-1" th:field="${user.selectedGenres}"
                                               th:text="${genre.name}" th:value="${genre.id}" type="checkbox"/>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="card border-2 border-dark-subtle">
                            <div class="card-header text-center">
                                <span th:text="#{sign.up.preferences.directors}"></span></div>
                            <div class="card-body bg-light-subtle p-0 overflow-y-scroll"
                                 style="--height: 400px; min-height: var(--height); max-height: var(--height);">
                                <div class="list-group rounded-0" th:each="director : ${directors}">
                                    <label class="list-group-item border-top-0 border-start-0 border-end-0">
                                        <input class="form-check-input me-1" th:field="${user.selectedDirectors}"
                                               th:text="${director.name}" th:value="${director.id}" type="checkbox"/>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="card border-2 border-dark-subtle">
                            <div class="card-header text-center">
                                <span th:text="#{sign.up.preferences.actors}"></span></div>
                            <div class="card-body bg-light-subtle p-0 overflow-y-scroll"
                                 style="--height: 400px; min-height: var(--height); max-height: var(--height);">
                                <div class="list-group rounded-0" th:each="actor : ${actors}">
                                    <label class="list-group-item border-top-0 border-start-0 border-end-0">
                                        <input class="form-check-input me-1" th:field="${user.selectedActors}"
                                               th:text="${actor.name}" th:value="${actor.id}" type="checkbox"/>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>
                <div class="row g-3">
                    <div class="col-md-6">
                        <input class="form-control btn btn-success" data-bs-target="#confirm" data-bs-toggle="modal"
                               id="submitButton" name="submitButton" th:value="#{btn.save}" type="button"/>
                    </div>
                    <div class="col-md-6">
                        <a class="form-control btn btn-outline-light" id="cancel" th:href="@{/}"
                           th:text="#{btn.cancel}"></a>
                    </div>
                </div>

                <!-- Confirm user profile changes modal -->
                <div aria-hidden="true" aria-labelledby="confirmLabel" class="modal fade" data-bs-backdrop="static"
                     data-bs-keyboard="true" id="confirm" tabindex="-1">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="confirmLabel"
                                    th:text="#{modal.confirm.user.profile.title}"></h5>
                                <button aria-label="Close" class="btn-close" data-bs-dismiss="modal"
                                        type="button"></button>
                            </div>
                            <div class="modal-body">
                                <p th:text="#{modal.confirm.user.profile.body}"></p>
                                <div class="modal-footer">
                                    <button class="btn btn-success" id="submit" name="submit"
                                            th:text="#{btn.confirm}" type="submit" value=""/>
                                    <button class="btn btn-outline-light" data-bs-dismiss="modal"
                                            th:text="#{btn.cancel}" type="button"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </section>

    <!-- Log out modal -->
    <div th:replace="fragments/header::modal-logout"></div>

    <script th:src="@{/js/main.js}"></script>
    <script th:src="@{/bootstrap/js/bootstrap.js}"></script>
</main>
<footer th:replace="fragments/footer::footer"></footer>
</body>

</html>