<html data-bs-theme="dark" lang="es"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header::header-css">
    <title th:text="#{app.title}"></title>
</head>
<body class="d-flex flex-column min-vh-100">
<header th:replace="fragments/header::header-admin"></header>
<main id="main">
    <section class="px-sm-3 bg-gradient-reverse">
        <div class="container-lg">
            <h2 class="m-4 text-center" th:text="#{admin.content.title}"></h2>
        </div>
        <hr class="m-0 p-0">
    </section>


    <section class="p-sm-3" id="content-details">
        <div class="container-lg">
            <form class="needs-validation" method="post" novalidate th:action="@{/admin-content}"
                  th:object="${content}">

                <!-- Content details -->
                <div class="row g-3">
                    <div class="col-lg-9" hidden="hidden">
                        <input id="id" th:field="*{id}" type="hidden">
                        <input id="added" th:field="*{added}" type="hidden">
                    </div>
                    <div class="col-lg-9">
                        <label class="form-label visually-hidden" for="title" th:text="#{content.title}"></label>
                        <div class="input-group has-validation mb-2">
                            <span class="input-group-text" id="inputGroupTitle" th:text="#{content.title}"></span>
                            <input aria-describedby="inputGroupTitle" autofocus class="form-control"
                                   id="title" maxlength="256" name="title" required
                                   th:value="*{title}" type="text">
                            <div class="invalid-feedback">
                                <i class="bi-exclamation-circle"></i>
                                <span th:text="#{content.mandatory.title}"></span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label visually-hidden" for="premier" th:text="#{content.premier}"></label>
                        <div class="input-group has-validation mb-2">
                            <span class="input-group-text" id="inputGroupFirstName" th:text="#{content.premier}"></span>
                            <input aria-describedby="inputGroupFirstName" class="form-control" id="premier"
                                   name="premier" required th:value="*{premier}" type="number">
                            <div class="invalid-feedback">
                                <i class="bi-exclamation-circle"></i>
                                <span th:text="#{content.mandatory.premier}"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>

                <div class="row g-3">
                    <div class="col-md-4">
                        <label class="form-label visually-hidden" for="type" th:text="#{content.type}"></label>
                        <div class="input-group has-validation mb-2">
                            <span class="input-group-text" id="inputGroupType" th:text="#{content.type}"></span>
                            <select aria-describedby="inputGroupType" class="form-control" id="type" name="type"
                                    required th:field="*{type.id}" th:value="*{type.id}">
                                <option th:each="type : ${types}" th:field="*{type.id}"
                                        th:text="#{${type.tag}}" th:value="${type.id}"></option>
                            </select>
                            <div class="invalid-feedback">
                                <i class="bi-exclamation-circle"></i>
                                <span th:text="#{content.mandatory.type}"></span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label visually-hidden" for="feature" th:text="#{content.feature}"></label>
                        <div class="input-group has-validation mb-2">
                            <span class="input-group-text" id="inputGroupFeature" th:text="#{content.feature}"></span>
                            <select aria-describedby="inputGroupFeature" class="form-control" id="feature"
                                    name="feature" required th:field="*{feature.id}" th:value="*{feature.id}">
                                <option th:each="feature : ${features}" th:field="*{feature.id}"
                                        th:text="#{${feature.tag}}" th:value="${feature.id}"></option>
                            </select>
                            <div class="invalid-feedback">
                                <i class="bi-exclamation-circle"></i>
                                <span th:text="#{content.mandatory.feature}"></span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label visually-hidden" for="production"
                               th:text="#{content.production}"></label>
                        <div class="input-group has-validation mb-2">
                            <span class="input-group-text" id="inputGroupLastName"
                                  th:text="#{content.production}"></span>
                            <input aria-describedby="inputGroupLastName" class="form-control" id="production"
                                   maxlength="256" name="production" required th:value="*{production}" type="text">
                            <div class="invalid-feedback">
                                <i class="bi-exclamation-circle"></i>
                                <span th:text="#{content.mandatory.production}"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>

                <div class="row">
                    <div class="col-md-12">
                        <label class="form-label visually-hidden" for="cover" th:text="#{content.cover}"></label>
                        <div class="input-group has-validation mb-2">
                            <span class="input-group-text" id="inputGroupPhone" th:text="#{content.cover}"></span>
                            <input aria-describedby="inputGroupPhone" class="form-control" id="cover" name="cover"
                                   required th:value="*{cover}" type="url">
                            <div class="invalid-feedback">
                                <i class="bi-exclamation-circle"></i>
                                <span th:text="#{content.mandatory.cover}"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <label class="form-label visually-hidden" for="resourcePath"
                               th:text="#{content.resource}"></label>
                        <div class="input-group has-validation mb-2">
                            <span class="input-group-text" id="inputGroupAddress" th:text="#{content.resource}"></span>
                            <input aria-describedby="inputGroupAddress" class="form-control" id="resourcePath"
                                   name="resourcePath" required th:value="*{resourcePath}" type="url">
                            <div class="invalid-feedback">
                                <i class="bi-exclamation-circle"></i>
                                <span th:text="#{content.mandatory.resource}"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>

                <div class="row">
                    <div class="col-md-12">
                        <label class="form-label visually-hidden" for="synopsis" th:text="#{content.synopsis}"/>
                        <div class="input-group has-validation mb-2">
                            <span class="input-group-text" id="inputGroupSynopsis" th:text="#{content.synopsis}"/>
                            <textarea aria-describedby="inputGroupSynopsis" class="form-control" id="synopsis"
                                      maxlength="256" name="synopsis" required rows="3" th:field="*{synopsis}">
                            </textarea>
                            <div class="invalid-feedback">
                                <i class="bi-exclamation-circle"></i>
                                <span th:text="#{content.mandatory.synopsis}"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>

                <!-- Preferences -->
                <div class="row g-3" id="preferences">
                    <div class="card-group">
                        <div class="card border-2 border-dark-subtle">
                            <div class="card-header text-center">
                                <span th:text="#{sign.up.preferences.genres}"></span></div>
                            <div class="card-body bg-light-subtle p-0 overflow-y-scroll"
                                 style="--height: 200px; min-height: var(--height); max-height: var(--height);">
                                <div class="list-group rounded-0" th:each="genre : ${genres}">
                                    <label class="list-group-item border-top-0 border-start-0 border-end-0">
                                        <input class="form-check-input me-1" th:field="${content.selectedGenres}"
                                               th:text="${genre.name}" th:value="${genre.id}" type="checkbox"/>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="card border-2 border-dark-subtle">
                            <div class="card-header text-center">
                                <span th:text="#{sign.up.preferences.directors}"></span></div>
                            <div class="card-body bg-light-subtle p-0 overflow-y-scroll"
                                 style="--height: 200px; min-height: var(--height); max-height: var(--height);">
                                <div class="list-group rounded-0" th:each="director : ${directors}">
                                    <label class="list-group-item border-top-0 border-start-0 border-end-0">
                                        <input class="form-check-input me-1" th:field="${content.selectedDirectors}"
                                               th:text="${director.name}" th:value="${director.id}" type="checkbox"/>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="card border-2 border-dark-subtle">
                            <div class="card-header text-center">
                                <span th:text="#{sign.up.preferences.actors}"></span></div>
                            <div class="card-body bg-light-subtle p-0 overflow-y-scroll"
                                 style="--height: 200px; min-height: var(--height); max-height: var(--height);">
                                <div class="list-group rounded-0" th:each="actor : ${actors}">
                                    <label class="list-group-item border-top-0 border-start-0 border-end-0">
                                        <input class="form-check-input me-1" th:field="${content.selectedActors}"
                                               th:text="${actor.name}" th:value="${actor.id}" type="checkbox"/>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>

                <div class="row g-3">
                    <div class="col-md-6">
                        <input class="form-control btn btn-success" data-bs-target="#confirm" data-bs-toggle="modal"
                               id="submitButton" name="submitButton" th:value="#{btn.save}" type="button"/>
                    </div>
                    <div class="col-md-6">
                        <a class="form-control btn btn-outline-light" href="/admin-contents" id="cancel"
                           th:text="#{btn.cancel}"></a>
                    </div>
                </div>

                <!-- Confirm content changes modal -->
                <div aria-hidden="true" aria-labelledby="confirmLabel" class="modal fade" data-bs-backdrop="static"
                     data-bs-keyboard="true" id="confirm" tabindex="-1">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="confirmLabel"
                                    th:text="#{modal.confirm.content.details.title}"></h5>
                                <button aria-label="Close" class="btn-close" data-bs-dismiss="modal"
                                        type="button"></button>
                            </div>
                            <div class="modal-body">
                                <p th:text="#{modal.confirm.content.details.body}"></p>
                                <div class="modal-footer">
                                    <button class="btn btn-success" id="submit" name="submit"
                                            th:text="#{btn.confirm}" type="submit"/>
                                    <button class="btn btn-outline-light" data-bs-dismiss="modal"
                                            th:text="#{btn.cancel}" type="button"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </section>

    <!-- Log out modal -->
    <div th:replace="fragments/header::modal-logout"></div>

    <script th:src="@{/js/main.js}"></script>
    <script th:src="@{/bootstrap/js/bootstrap.js}"></script>
</main>
<footer th:replace="fragments/footer::footer"></footer>
</body>

</html>